<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>STORE RAYAN â€“ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:'Arial',sans-serif;margin:0;background:#f5f5f5;color:#333;}
header{background:#2c3e50;color:white;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:100;box-shadow:0 2px 8px rgba(0,0,0,0.2);}
.header-left, .header-right{display:flex;align-items:center;gap:1rem;}
.header-center{text-align:center;flex:1;}
.header-center h1{margin:0;font-size:1.5rem;}
.header-center h2{margin:.3rem 0;}
.search-box{margin-top:.5rem;}
.search-box input{width:60%;padding:.5rem 1rem;border-radius:20px;border:none;font-size:1rem;}
.btn{padding:.5rem 1rem;border-radius:20px;border:none;color:white;cursor:pointer;transition:.3s;}
.btn:hover{opacity:.8;}
.cart{position:relative;background:#27ae60;}
.cart span{position:absolute;top:-8px;right:-8px;background:red;color:white;font-size:.7rem;padding:2px 6px;border-radius:50%;}

.profile-btn{cursor:pointer;display:flex;align-items:center;gap:.5rem;}
.profile-btn img{width:40px;height:40px;border-radius:50%;border:2px solid white;object-fit:cover;}

.profile-menu{
  display:none;position:absolute;top:70px;right:20px;background:white;color:#333;
  border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.2);min-width:250px;padding:1rem;text-align:center;z-index:200;
}
.profile-menu img{width:70px;height:70px;border-radius:50%;margin-bottom:.5rem;}
.profile-menu p{margin:.3rem 0;}
.profile-menu button{width:100%;margin-top:.5rem;padding:.5rem;border:none;border-radius:10px;cursor:pointer;}
.profile-menu button.settings{background:#3498db;color:white;}
.profile-menu button.logout{background:#e74c3c;color:white;}
.profile-menu button:hover{opacity:.85;}

.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.5rem;padding:2rem;max-width:1300px;margin:auto;}
.product{background:white;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.1);overflow:hidden;display:flex;flex-direction:column;transition:transform .3s,box-shadow .3s;}
.product:hover{transform:translateY(-5px);box-shadow:0 8px 16px rgba(0,0,0,.2);}
.product img{width:100%;height:180px;object-fit:cover;}
.product .info{padding:1rem;flex-grow:1;display:flex;flex-direction:column;}
.product h3{margin:0;font-size:1.1rem;color:#2c3e50;}
.product p{margin:.5rem 0;color:#777;font-size:.85rem;}
.product .price{font-size:1rem;font-weight:bold;color:#27ae60;margin-top:auto;}
.product .actions{display:flex;gap:.5rem;margin-top:.5rem;}
.product button{flex:1;padding:.5rem;border:none;border-radius:6px;cursor:pointer;transition:.3s;}
.product button.buy{background:#2980b9;color:white;}
.product button.buy:hover{background:#21618c;}
.product button.add{background:#27ae60;color:white;}
.product button.add:hover{background:#1e8449;}

footer{background:#2c3e50;color:white;text-align:center;padding:1rem;margin-top:2rem;}

/* ÙƒÙˆØ¯ Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø³Ù„Ø© */
#cartModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;z-index:300;}
#cartModalContent{background:white;padding:1rem 2rem;border-radius:12px;max-width:600px;width:90%;max-height:80%;overflow-y:auto;position:relative;}
#cartModalContent h2{text-align:center;margin-bottom:1rem;}
.cart-item{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;border-bottom:1px solid #ddd;padding-bottom:10px;}
.cart-item img{width:60px;height:60px;object-fit:cover;border-radius:8px;}
.cart-item div p{margin:0;}
.cart-item button{background:#e74c3c;color:white;border:none;padding:.3rem .7rem;border-radius:6px;cursor:pointer;}
.cartModalButtons{margin-top:1rem;text-align:center;}
.cartModalButtons button{padding:.7rem 1.5rem;border:none;border-radius:10px;color:white;cursor:pointer;margin:0 5px;}
.checkout-btn{background:#27ae60;}
.close-btn{background:#e74c3c;}
</style>
</head>
<body>

<header>
  <div class="header-left">
    <div class="cart btn" onclick="viewCart()">
  <img src="https://i.imgur.com/LDttFTR.jpeg" alt="Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚" style="width:32px;height:32px;">
  <span id="cart-count">0</span>
</div>

  </div>
  <div class="header-center">
    <h1>ğŸ›ï¸ STORE RAYAN</h1>
    <h2>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
    <div class="search-box">
      <input type="text" id="search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...">
    </div>
  </div>
  <div class="header-right">
    <div class="profile-btn" onclick="toggleProfile()">
      <img id="profileAvatar" src="https://i.pravatar.cc/150?img=12" alt="avatar">
      <span id="profileName">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
    </div>
  </div>
</header>

<!-- Ù…Ù†Ø¨Ø«Ù‚ Ø§Ù„Ø³Ù„Ø© -->
<div id="cartModal">
  <div id="cartModalContent">
    <h2>ğŸ›’ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
    <div id="cartItems"></div>
    <div class="cartModalButtons">
      <button class="checkout-btn" onclick="checkoutCart()">ğŸ’³ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹</button>
      <button class="close-btn" onclick="closeCart()">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
  </div>
</div>

<div id="profileMenu" class="profile-menu"></div>
<section class="products" id="products"></section>

<footer>&copy; 2025 STORE RAYAN - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</footer>

<script>
let productsData = [
  {name:"Ù‡Ø§ØªÙ Ø°ÙƒÙŠ", price:1200, img:"https://picsum.photos/300/200?1"},
  {name:"Ø³Ù…Ø§Ø¹Ø§Øª Ù„Ø§Ø³Ù„ÙƒÙŠØ©", price:250, img:"https://picsum.photos/300/200?2"},
  {name:"Ù„Ø§Ø¨ØªÙˆØ¨ Ø­Ø¯ÙŠØ«", price:3500, img:"https://picsum.photos/300/200?3"},
  {name:"Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ©", price:500, img:"https://picsum.photos/300/200?4"}
];

const productsContainer = document.getElementById("products");
const cartCount = document.getElementById("cart-count");
let cart = JSON.parse(localStorage.getItem('cart')) || [];

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
function displayProducts(list){
  productsContainer.innerHTML = "";
  list.forEach((p,i)=>{
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <div class="info">
        <h3>${p.name}</h3>
        <p>ÙˆØµÙ Ù‚ØµÙŠØ± Ù„Ù„Ù…Ù†ØªØ¬.</p>
        <div class="price">${p.price} Ø¯Ø±Ù‡Ù…</div>
        <div class="actions">
          <button class="add" onclick="addToCart(${i})">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
          <button class="buy" onclick="buyOne(${i})">Ø´Ø±Ø§Ø¡</button>
        </div>
      </div>
    `;
    productsContainer.appendChild(div);
  });
}
displayProducts(productsData);

// Ø§Ù„Ø¨Ø­Ø«
document.getElementById("search").addEventListener("input",function(){
  const q=this.value.toLowerCase();
  displayProducts(productsData.filter(p=>p.name.toLowerCase().includes(q)));
});

// ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
function isLoggedIn(){ return JSON.parse(localStorage.getItem("loggedUser")); }

// Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
function addToCart(index){
  if(!isLoggedIn()){ alert("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ ğŸ“"); window.location.href="login.html"; return; }
  const existing = cart.find(p => p.name === productsData[index].name);
  if(existing){ existing.qty = (existing.qty || 1) + 1; }
  else { cart.push({...productsData[index], qty:1}); }
  localStorage.setItem('cart', JSON.stringify(cart));
  cartCount.textContent = cart.reduce((sum,p)=>sum+(p.qty||1),0);
  viewCart();
}

// Ø´Ø±Ø§Ø¡ Ù…Ù†ØªØ¬ ÙˆØ§Ø­Ø¯
function buyOne(index){
  if(!isLoggedIn()){ alert("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ ğŸ“"); window.location.href="login.html"; return; }
  const product = {...productsData[index], qty:1};
  localStorage.setItem('cart', JSON.stringify([product]));
  viewCart();
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø© Ø¨Ø´ÙƒÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ
function viewCart(){
  const modal = document.getElementById("cartModal");
  const container = document.getElementById("cartItems");
  if(cart.length===0){ alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©."); return; }
  container.innerHTML = "";
  cart.forEach((p,i)=>{
    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `
      <div style="display:flex;align-items:center;gap:10px;">
        <img src="${p.img}" alt="${p.name}">
        <div>
          <p><b>${p.name}</b></p>
          <p>${p.price} Ø¯Ø±Ù‡Ù… Ã— ${p.qty}</p>
        </div>
      </div>
      <button onclick="removeFromCart(${i})">Ø­Ø°Ù</button>
    `;
    container.appendChild(div);
  });
  modal.style.display = "flex";
}
function closeCart(){ document.getElementById("cartModal").style.display = "none"; }
function removeFromCart(index){
  cart.splice(index,1);
  localStorage.setItem('cart',JSON.stringify(cart));
  cartCount.textContent = cart.reduce((sum,p)=>sum+(p.qty||1),0);
  viewCart();
}
function checkoutCart(){
  if(cart.length===0){ alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©."); return; }
  localStorage.setItem('cart',JSON.stringify(cart));
  window.location.href="checkout.html";
}

// Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
function toggleProfile(){
  const menu=document.getElementById("profileMenu");
  if(menu.style.display==="block"){menu.style.display="none"; return;}
  const user=isLoggedIn();
  if(user){
    menu.innerHTML = `
      <img src="${user.avatar||'https://i.pravatar.cc/100'}" alt="profile">
      <p><b>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…:</b> ${user.name}</p>
      <p><b>ğŸ“§ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:</b> ${user.email}</p>
      <button class="settings" onclick="goSettings()">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
      <button class="logout" onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    `;
    document.getElementById("profileAvatar").src = user.avatar || 'https://i.pravatar.cc/150?img=12';
    document.getElementById("profileName").textContent = user.name;
  } else {
    menu.innerHTML = `
      <p>ğŸ”‘ Ù„Ù… ØªÙ‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</p>
      <button onclick="window.location.href='login.html'">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      <button onclick="window.location.href='login.html'">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
    `;
    document.getElementById("profileName").textContent = "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
    document.getElementById("profileAvatar").src = 'https://i.pravatar.cc/150?img=12';
  }
  menu.style.display="block";
}
function goSettings(){ window.location.href="settings.html"; }
function logout(){ localStorage.removeItem("loggedUser"); alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬!"); location.reload(); }

cartCount.textContent = cart.reduce((sum,p)=>sum+(p.qty||1),0);

// Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¥Ø°Ø§ Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
window.onclick = function(event){
  if(!event.target.closest('.profile-btn') && !event.target.closest('.profile-menu')){
    document.getElementById("profileMenu").style.display="none";
  }
}
</script>

</body>
</html>
